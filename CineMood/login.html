<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Modunu Test Et! - Giriş Yap</title>
    <meta name="description" content="CineMood hesabınıza giriş yapın" />
    <link rel="stylesheet" href="/CineMood/css/style.css" />
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
      .logo-link {
        text-decoration: none; /* Altı çiziliği kaldırır */
      }

      .logo {
        font-size: 24px;
        font-weight: bold;
        color: #06d44b; /* Orijinal renk */
        cursor: pointer;
      }

      .logo:hover {
        color: #06d44b; /* Hover sırasında da rengin sabit kalmasını sağlar */
      }
    </style>
  </head>
  <body
    class="netflix-style"
    style="
      background: url('https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')
        no-repeat center center fixed;
      background-size: cover;
    "
  >
    <!-- Navbar -->
    <nav class="navbar netflix-nav">
      <a href="animate3.html" class="logo-link">
        <div class="logo">CineMood</div>
      </a>
      <div class="nav-links">
        <a href="/CineMood/register.html" class="netflix-button">Kayıt Ol</a>
      </div>
    </nav>
    <!-- Giriş Formu -->
    <div class="form-container netflix-form-container">
      <div class="form-box netflix-form-box">
        <h1 class="form-title" style="color: white">Oturum Aç</h1>
        <form
          action="php/login.php"
          method="POST"
          id="loginForm"
          class="form netflix-form"
          aria-label="Giriş Formu"
        >
          <!-- Email input -->
          <div class="input-group netflix-input-group">
            <input
              type="email"
              id="email"
              name="email"
              autocomplete="email"
              required
              placeholder="E-posta veya telefon numarası"
              class="input-field netflix-input"
              aria-required="true"
            />
          </div>

          <!-- Şifre input -->
          <div class="input-group netflix-input-group">
            <input
              type="password"
              id="password"
              name="password"
              autocomplete="current-password"
              required
              placeholder="Şifre"
              class="input-field netflix-input"
              aria-required="true"
            />
          </div>

          <!-- Giriş Yap butonu -->
          <button type="submit" class="netflix-submit-button">Giriş Yap</button>

          <!-- Beni Hatırla & Şifremi Unuttum -->
          <div class="options netflix-options">
            <label>
              <input
                type="checkbox"
                id="remember_me"
                name="remember_me"
                class="checkbox"
              />
              Beni hatırla
            </label>
            <a
              href="/CineMood/forgot-password.html"
              class="forgot-password netflix-link"
              aria-label="Şifremi unuttum"
              >Şifremi unuttum</a
            >
          </div>
        </form>

        <!-- Alt yazı -->
        <div class="netflix-signup">
          <p>
            CineMood'a yeni mi katılıyorsunuz?
            <a href="/CineMood/register.html" class="netflix-link"
              >Şimdi kaydolun</a
            >.
          </p>
        </div>
      </div>
    </div>

    <script>
      document
        .getElementById("loginForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const formData = new FormData(this);

          fetch("php/login.php", {
            method: "POST",
            body: formData,
          })
            .then((response) => {
              if (response.redirected) {
                window.location.href = response.url;
              } else {
                return response.text();
              }
            })
            .then((data) => {
              if (data) {
                window.location.href = "fail.html";
              }
            })
            .catch((error) => {
              console.error("Error:", error);
              window.location.href = "fail.html";
            });
        });
    </script>
  </body>
</html>
